syntax = "proto3";
package cloudmind.core_api;
option go_package = "cloudmind/core_api";
import "cloudmind/user/common.proto";
import "cloudmind/sts/common.proto";
import "basic/pagination.proto";
import "http/http.proto";

enum RegisterType {
  unKnownRegisterType = 0;
  email = 1;
  qq = 2;
  wx = 3;
}

message RegisterReq{
  string name = 1;
  user.Sex sex = 2;
  RegisterType registerType = 3;
  string authKey = 4;
  string password = 5;
  optional string code = 6;
}
message RegisterResp{
  string shortToken = 1;
  string longToken = 2;
  string userId = 3;
}

message LoginReq{
  string email = 1;
  string password = 2;
  sts.Point point = 3;
  string key = 4;
}

message LoginResp{
  string shortToken = 1;
  string longToken = 2;
  string userId = 3;
}

message RefreshTokenReq {
  string longToken = 1;
}

message RefreshTokenResp{
  string shortToken = 1;
  string longToken = 2;
}

message SendEmailReq {
  string email = 1;
  string subject = 2;
}

message SendEmailResp {
}

message GetCaptchaReq{
}

message GetCaptchaResp{
  string originalImageBase64 = 1;
  string jigsawImageBase64 = 2;
  string key = 3;
}


message SetPasswordByEmailReq{
  string email = 1;
  string code = 2;
  string password = 3;
}
message SetPasswordByEmailResp{
}


message SetPasswordByPasswordReq{
  string oldPassword = 1;
  string password = 2;
}
message SetPasswordByPasswordResp{
}